[0;34m========================================
  Online Pointing Utils - Test Suite
========================================[0m

[0;34mRunning test suites...[0m

[1;33mâ†’ Running Backtracking...[0m
================================================
Testing: backtrack_tpstream
================================================
Testing ES sample...
06/11/2025 19:51:10 [32m[backtrack_tpstream.cpp][0m: > backtrack app - extract TPs and attach truth, writing *_tps_bktr<N>.root files (N: backtracker_error_margin).

06/11/2025 19:51:10 [32m[backtrack_tpstream.cpp][0m: Usage: 
06/11/2025 19:51:10 [32m[backtrack_tpstream.cpp][0m: â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Main options â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
06/11/2025 19:51:10 [32m[backtrack_tpstream.cpp][0m: json {-j,--json}: JSON file containing the configuration (expected: 1 value)
06/11/2025 19:51:10 [32m[backtrack_tpstream.cpp][0m: outFolder {--output-folder}: Output folder path (default: data) (expected: 1 value)
06/11/2025 19:51:10 [32m[backtrack_tpstream.cpp][0m: inputFile {-i,--input-file}: Input file with list OR single ROOT file path (overrides JSON inputs) (expected: 1 value)
06/11/2025 19:51:10 [32m[backtrack_tpstream.cpp][0m: bktrMargin {--bktr-margin}: Override backtracker_error_margin (int) (expected: 1 value)
06/11/2025 19:51:10 [32m[backtrack_tpstream.cpp][0m: maxFiles {--max-files}: Maximum number of files to process (overrides JSON max_files) (expected: 1 value)
06/11/2025 19:51:10 [32m[backtrack_tpstream.cpp][0m: skipFiles {--skip-files}: Number of files to skip at start (overrides JSON skip_files) (expected: 1 value)
06/11/2025 19:51:10 [32m[backtrack_tpstream.cpp][0m: â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Triggers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
06/11/2025 19:51:10 [32m[backtrack_tpstream.cpp][0m: verboseMode {-v,--verbose}: Run in verbose mode (trigger)
06/11/2025 19:51:10 [32m[backtrack_tpstream.cpp][0m: debugMode {-d,--debug}: Run in debug mode (more detailed than verbose) (trigger)
06/11/2025 19:51:10 [32m[backtrack_tpstream.cpp][0m: overrideMode {-f,--override}: Force reprocessing even if output already exists (trigger)


06/11/2025 19:51:10 [32m[backtrack_tpstream.cpp][0m: Loading JSON config: test/test_backtrack/test_backtrack_es.json
06/11/2025 19:51:10 [32m[backtrack_tpstream.cpp][0m: Using backtracker_error_margin: 0
06/11/2025 19:51:10 [32m[utils.cpp][0m: [find_input_files] Called with pattern: tpstream
06/11/2025 19:51:10 [32m[utils.cpp][0m: [find_input_files] Found key 'tpstream_input_file' with value: test/data/test_es_tpstream.root
06/11/2025 19:51:10 [32m[utils.cpp][0m: [find_input_files] Adding file from 'tpstream_input_file': test/data/test_es_tpstream.root
06/11/2025 19:51:10 [32m[backtrack_tpstream.cpp][0m: Number of valid files: 1
06/11/2025 19:51:10 [32m[backtrack_tpstream.cpp][0m: Max files: unlimited
06/11/2025 19:51:10 [32m[backtrack_tpstream.cpp][0m: Number of files to skip at start (from JSON): 0
06/11/2025 19:51:10 [32m[backtrack_tpstream.cpp][0m: Output folder (pure signal TPs): test/test_backtrack/output/
06/11/2025 19:51:10 [32m[backtrack_tpstream.cpp][0m: Effective time window (TDC ticks): 32 (conversion_tdc_to_tpc=32)
06/11/2025 19:51:10 [32m[backtrack_tpstream.cpp][0m: Channel tolerance (channels): 0
Processing files... 100% (  200 it/s)
06/11/2025 19:51:12 [33m[Backtracking.cpp][0m: TriggerPrimitive version is not 2, be sure to have converted time_peak to samples_to_peak
06/11/2025 19:51:13 [32m[backtrack_tpstream.cpp][0m: 
06/11/2025 19:51:13 [32m[backtrack_tpstream.cpp][0m: List of output files (1):
06/11/2025 19:51:13 [32m[backtrack_tpstream.cpp][0m:  - /home/virgolaema/dune/online-pointing-utils/test/test_backtrack/output//test_es_tps_bktr0.root
âœ— ES backtracking failed - output file not found
[0;31mâœ— Backtracking FAILED[0m

[1;33mâ†’ Running Clustering...[0m
================================================
Testing: make_clusters
================================================
Running backtracking test first...
================================================
Testing: backtrack_tpstream
================================================
Testing ES sample...
06/11/2025 19:51:13 [32m[backtrack_tpstream.cpp][0m: > backtrack app - extract TPs and attach truth, writing *_tps_bktr<N>.root files (N: backtracker_error_margin).

06/11/2025 19:51:13 [32m[backtrack_tpstream.cpp][0m: Usage: 
06/11/2025 19:51:13 [32m[backtrack_tpstream.cpp][0m: â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Main options â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
06/11/2025 19:51:13 [32m[backtrack_tpstream.cpp][0m: json {-j,--json}: JSON file containing the configuration (expected: 1 value)
06/11/2025 19:51:13 [32m[backtrack_tpstream.cpp][0m: outFolder {--output-folder}: Output folder path (default: data) (expected: 1 value)
06/11/2025 19:51:13 [32m[backtrack_tpstream.cpp][0m: inputFile {-i,--input-file}: Input file with list OR single ROOT file path (overrides JSON inputs) (expected: 1 value)
06/11/2025 19:51:13 [32m[backtrack_tpstream.cpp][0m: bktrMargin {--bktr-margin}: Override backtracker_error_margin (int) (expected: 1 value)
06/11/2025 19:51:13 [32m[backtrack_tpstream.cpp][0m: maxFiles {--max-files}: Maximum number of files to process (overrides JSON max_files) (expected: 1 value)
06/11/2025 19:51:13 [32m[backtrack_tpstream.cpp][0m: skipFiles {--skip-files}: Number of files to skip at start (overrides JSON skip_files) (expected: 1 value)
06/11/2025 19:51:13 [32m[backtrack_tpstream.cpp][0m: â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Triggers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
06/11/2025 19:51:13 [32m[backtrack_tpstream.cpp][0m: verboseMode {-v,--verbose}: Run in verbose mode (trigger)
06/11/2025 19:51:13 [32m[backtrack_tpstream.cpp][0m: debugMode {-d,--debug}: Run in debug mode (more detailed than verbose) (trigger)
06/11/2025 19:51:13 [32m[backtrack_tpstream.cpp][0m: overrideMode {-f,--override}: Force reprocessing even if output already exists (trigger)


06/11/2025 19:51:13 [32m[backtrack_tpstream.cpp][0m: Loading JSON config: test/test_backtrack/test_backtrack_es.json
06/11/2025 19:51:13 [32m[backtrack_tpstream.cpp][0m: Using backtracker_error_margin: 0
06/11/2025 19:51:13 [32m[utils.cpp][0m: [find_input_files] Called with pattern: tpstream
06/11/2025 19:51:13 [32m[utils.cpp][0m: [find_input_files] Found key 'tpstream_input_file' with value: test/data/test_es_tpstream.root
06/11/2025 19:51:13 [32m[utils.cpp][0m: [find_input_files] Adding file from 'tpstream_input_file': test/data/test_es_tpstream.root
06/11/2025 19:51:13 [32m[backtrack_tpstream.cpp][0m: Number of valid files: 1
06/11/2025 19:51:13 [32m[backtrack_tpstream.cpp][0m: Max files: unlimited
06/11/2025 19:51:13 [32m[backtrack_tpstream.cpp][0m: Number of files to skip at start (from JSON): 0
06/11/2025 19:51:13 [32m[backtrack_tpstream.cpp][0m: Output folder (pure signal TPs): test/test_backtrack/output/
06/11/2025 19:51:13 [32m[backtrack_tpstream.cpp][0m: Effective time window (TDC ticks): 32 (conversion_tdc_to_tpc=32)
06/11/2025 19:51:13 [32m[backtrack_tpstream.cpp][0m: Channel tolerance (channels): 0
Processing files... 100% ( 2000 it/s)
06/11/2025 19:51:13 [32m[backtrack_tpstream.cpp][0m: Output already exists, skipping: /home/virgolaema/dune/online-pointing-utils/test/test_backtrack/output//test_es_tps_bktr0.root (use --override to force reprocessing)
06/11/2025 19:51:13 [32m[backtrack_tpstream.cpp][0m: 
06/11/2025 19:51:13 [32m[backtrack_tpstream.cpp][0m: List of output files (1):
06/11/2025 19:51:13 [32m[backtrack_tpstream.cpp][0m:  - /home/virgolaema/dune/online-pointing-utils/test/test_backtrack/output//test_es_tps_bktr0.root
âœ— ES backtracking failed - output file not found
[0;31mâœ— Clustering FAILED[0m

[1;33mâ†’ Running Matching...[0m
================================================
Testing: match_clusters
================================================
Running clustering test first...
/home/virgolaema/dune/online-pointing-utils/test/test_matching/test_matching.sh: line 24: cd: ../test_clustering: No such file or directory
Testing ES matching...
06/11/2025 19:51:13 [32m[match_clusters.cpp][0m: > match_clusters batch processing app.

06/11/2025 19:51:13 [32m[match_clusters.cpp][0m: Usage: 
06/11/2025 19:51:13 [32m[match_clusters.cpp][0m: â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Main options â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
06/11/2025 19:51:13 [32m[match_clusters.cpp][0m: json {-j,--json}: JSON file containing the configuration (expected: 1 value)
06/11/2025 19:51:13 [32m[match_clusters.cpp][0m: skip_files {-s,--skip,--skip-files}: Number of files to skip at start (overrides JSON) (expected: N values)
06/11/2025 19:51:13 [32m[match_clusters.cpp][0m: max_files {-m,--max,--max-files}: Maximum number of files to process (overrides JSON) (expected: N values)
06/11/2025 19:51:13 [32m[match_clusters.cpp][0m: outFolder {--outFolder,--output-folder}: Output folder path (overrides JSON) (expected: 1 value)
06/11/2025 19:51:13 [32m[match_clusters.cpp][0m: â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Triggers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
06/11/2025 19:51:13 [32m[match_clusters.cpp][0m: override {-f,--override}: Override existing output files (trigger)
06/11/2025 19:51:13 [32m[match_clusters.cpp][0m: verboseMode {-v}: RunVerboseMode, bool (trigger)
06/11/2025 19:51:13 [32m[match_clusters.cpp][0m: debugMode {-d}: RunDebugMode, bool (trigger)


06/11/2025 19:51:13 [32m[match_clusters.cpp][0m: Provided arguments: 
06/11/2025 19:51:13 [32m[match_clusters.cpp][0m: json: { "/home/virgolaema/dune/online-pointing-utils/test/test_matching/test_matching_es.json" }

06/11/2025 19:51:13 [32m[utils.cpp][0m: [find_input_files] Called with pattern: tpstream
06/11/2025 19:51:13 [33m[utils.cpp][0m: [find_input_files_by_tpstream_basenames] No tpstream files found
06/11/2025 19:51:13 [32m[match_clusters.cpp][0m: =========================================
06/11/2025 19:51:13 [32m[match_clusters.cpp][0m: Processing clusters from folder: 
06/11/2025 19:51:13 [32m[match_clusters.cpp][0m: Output will be written to: matched_clusters__tick0_ch0_min0_tot0_e0p0
06/11/2025 19:51:13 [32m[match_clusters.cpp][0m: Maximum files to process: -1
06/11/2025 19:51:13 [32m[match_clusters.cpp][0m: Skip files: 0
06/11/2025 19:51:13 [32m[match_clusters.cpp][0m: Found 0 cluster files to process
06/11/2025 19:51:13 [32m[match_clusters.cpp][0m: =========================================
06/11/2025 19:51:13 [32m[match_clusters.cpp][0m: =========================================
06/11/2025 19:51:13 [32m[match_clusters.cpp][0m: Batch processing complete!
06/11/2025 19:51:13 [32m[match_clusters.cpp][0m: Processed: 0 files
06/11/2025 19:51:13 [32m[match_clusters.cpp][0m: Failed: 0 files
06/11/2025 19:51:13 [32m[match_clusters.cpp][0m: =========================================
âœ— ES matching failed - output file not found
[0;31mâœ— Matching FAILED[0m

[1;33mâ†’ Running Analysis (clusters)...[0m
================================================
Testing: analyze_clusters
================================================
Running clustering test first...
/home/virgolaema/dune/online-pointing-utils/test/test_analysis/test_analyze_clusters.sh: line 24: cd: ../test_clustering: No such file or directory
Testing ES analysis...
terminate called after throwing an instance of 'std::runtime_error'
  what():  exception thrown by the logger at analyze_clusters.cpp:193: inputs.empty(): "No valid input files found."
/home/virgolaema/dune/online-pointing-utils/test/test_analysis/test_analyze_clusters.sh: line 30: 273203 Aborted                 (core dumped) ${BUILD_DIR}/src/app/analyze_clusters -j ${SCRIPT_DIR}/test_analyze_clusters_es.json
[0;31mâœ— Analysis (clusters) FAILED[0m

[1;33mâ†’ Running Analysis (TPs)...[0m
================================================
Testing: analyze_tps
================================================
Running backtracking test first...
/home/virgolaema/dune/online-pointing-utils/test/test_analysis/test_analyze_tps.sh: line 24: cd: ../test_backtrack: No such file or directory
Testing ES TPs analysis...
terminate called after throwing an instance of 'std::runtime_error'
  what():  exception thrown by the logger at analyze_tps.cpp:69: inputs.empty(): "No valid input files found."
/home/virgolaema/dune/online-pointing-utils/test/test_analysis/test_analyze_tps.sh: line 30: 273243 Aborted                 (core dumped) ${BUILD_DIR}/src/app/analyze_tps -j ${SCRIPT_DIR}/test_analyze_tps_es.json
[0;31mâœ— Analysis (TPs) FAILED[0m

[1;33mâ†’ Running Analysis (matching)...[0m
================================================
Testing: analyze_matching
================================================
Running matching test first...
/home/virgolaema/dune/online-pointing-utils/test/test_analysis/test_analyze_matching.sh: line 24: cd: ../test_matching: No such file or directory
Testing ES matching analysis...
06/11/2025 19:51:15 [32m[analyze_matching.cpp][0m: Analyzing matched clusters from: test/test_matching/output/test_es_matched.root
Error in <TFile::TFile>: file /home/virgolaema/dune/online-pointing-utils/test/test_matching/output/test_es_matched.root does not exist
06/11/2025 19:51:16 [31m[analyze_matching.cpp][0m: Failed to open file: test/test_matching/output/test_es_matched.root
[0;31mâœ— Analysis (matching) FAILED[0m

[0;34m========================================
  Test Summary
========================================[0m
Passed: [0;32m0[0m
Failed: [0;31m6[0m

[0;31mFailed tests:[0m
  [0;31mâœ—[0m Backtracking
  [0;31mâœ—[0m Clustering
  [0;31mâœ—[0m Matching
  [0;31mâœ—[0m Analysis (clusters)
  [0;31mâœ—[0m Analysis (TPs)
  [0;31mâœ—[0m Analysis (matching)

